/**
	@module:   stage
	@author:   lukehedger <luke.hedger@gmail.com>
	@css:      ./source/css/module/stage.styl
	@js:       ./source/js/module/stage.coffee
 */

.stage
	size: 100%
	absolute: top 0 left 0

// controls
.stage__control
	z-index: 99
	size: 100% 30px
	position: absolute
	cursor: pointer
	opacity: 0.7
	transition: 0.2s

	&:hover, &:focus
		opacity: 1

	svg
		align(horizontal)
		size: 50px auto

.stage__control--prev
	@extend .stage__control
	top: 10px
.stage__control--next
	@extend .stage__control
	bottom: 10px

// sun
.sun
	align(horizontal)
	size: 200px
	top: -90px
	z-index: 100

	// line
	// 	stroke-dasharray: 100
	// 	stroke-dashoffset: 100

// the whole farm
.farm
	size: 100% 50%
	z-index: 1

// TODO - day/night changes
.farm--day
	@extend .farm
.farm--digest
	@extend .farm
.farm--night
	@extend .farm

// bunting
.cable
	size: 50% auto
	absolute: top 0
.cable--left
	@extend .cable
	left: 0
.cable--right
	@extend .cable
	right: 0
	transform: scaleX(-1)

// flags
.flag
	size: 0
	border-style: solid
	border-width: 50px 25px 0 25px
	border-color: $color.blue transparent transparent transparent
	position: absolute

	&:first-of-type
		top: 5px
		left: 0
		transform: rotate(10deg)

// field
.field
	size: 100% 100px
	background-color: lighten($color.green, 30%)
	absolute: bottom 0
.camber
	size: 100% auto
	absolute: bottom 90px right -10px

// bunting
.bunting
	size: 100% 300px
	absolute: bottom 10px

.pole
	align(horizontal)
	size: 4px 300px
	background-color: $color.brown

// trees
.tree
	width: 0
	height: 0
	border-style: solid
	border-width: 0 17.5px 50px 17.5px
	border-color: transparent transparent $color.pine transparent
	position: absolute
	margin-top: 40px
	z-index: 19

	&:before
		content: ""
		width: 0
		height: 0
		border-style: solid
		border-width: 0 17.5px 40px 17.5px
		border-color: transparent transparent $color.pine transparent
		position: absolute
		top: -10px
		left: -17px

	&:after
		content: ""
		width: 15px
		height: 20px
		box-shadow: inset 0px 5px 10px rgba(0,0,0,0.3)
		background-color: $color.wood
		position: absolute
		bottom: -70px
		left: -7px

	&:nth-child(1)
		bottom: 100px
		left: -10px

	&:nth-child(2)
		bottom: 90px
		left: 10px

	&:nth-child(3)
		bottom: 100px
		left: 20px
		z-index: 10

	&:nth-child(4)
		bottom: 80px
		left: 80px

.tree--dark
	@extend .tree
	border-color: transparent transparent darken($color.pine, 10) transparent

	&:before
		border-color: transparent transparent darken($color.pine, 10) transparent

// tents
.tent
	width: 140px
	height: 170px
	display: inline-block
	absolute: right 0 bottom 30px
	transform: scale(0.8)

	&:nth-child(1)
		right: 250px

	&:nth-child(2)
		right: 125px

.tent--blue
	@extend .tent
	.canvas, .canvas:before
		border-bottom-color: $color.blue
	.awning
		background-color: $color.orange

.tent--pink
	@extend .tent
	.canvas, .canvas:before
		border-bottom-color: $color.pink
	.awning
		background-color: $color.turq

.canvas
	width: 140px
	height: 160px
	border-left: 20px solid transparent
	border-right: 20px solid transparent
	border-bottom: 80px solid $color.yellow
	position: absolute
	top: 0px

	&:before
		content: ""
		display: block
		width: 0
		height: 0
		border-left: 50px solid transparent
		border-right: 50px solid transparent
		border-bottom: 25px solid $color.green
		position: absolute
		top: 53px
		left: 0px

.flaps
	width: 0
	height: 0
	margin-left: -25px
	border-left: 25px solid transparent
	border-right: 25px solid transparent
	border-bottom: 75px solid $color.brown
	position: absolute
	bottom: -80px
	left: 50%

	&:before
		content: ""
		display: block
		width: 0
		height: 0
		margin-left: -25px
		border-left: 25px solid transparent
		border-bottom: 75px solid $color.lt-brown
		opacity: 0.5

.awning
	width: 50px
	height: 7px
	margin-left: -25px
	background-color: $color.red
	position: absolute
	top: 75px
	left: 50%

	&:before
		content: ""
		display: block
		width: 38px
		height: 83px
		border-left: 2px solid $color.brown
		border-right: 2px solid $color.brown
		position: absolute
		top: 0
		left: 6px

	&:after
		content: ""
		display: block
		width: 50px
		height: 93px
		border-left: 2px solid $color.brown
		border-right: 2px solid $color.brown

// fire
.fire
	margin-top: 50px
	margin-left: 50px
	width: 100px
	height: 100px
	border-bottom-right-radius: 50%
	border-bottom-left-radius: 50%
	border-top-left-radius: 50%
	transform: rotate(-45deg) scale(0.2)
	z-index: 2
	background: $color.orange
	absolute: bottom -20px right 145px

	&:after
		content: ""
		display: block
		width: 50px
		height: 50px
		border-bottom-right-radius: 50%
		border-bottom-left-radius: 50%
		border-top-left-radius: 50%
		z-index: 3
		background: $color.yellow
		position: absolute
		bottom: 20px
		left: 20px

.logs
	width: 100px
	height: 20px
	background: $color.brown
	transform: rotate(30deg)
	position: absolute
	bottom: 0px
	left: -37px
	z-index: 1

	&:after
		content: ""
		width: 100px
		height: 20px
		background: $color.brown
		transform: rotate(30deg)
		position: absolute
		bottom: 0px
		left: 0px
		z-index: 1
